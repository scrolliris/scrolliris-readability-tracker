!function e(t,n,r){function i(a,u){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return i(n||e)},s,s.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";!function(e){void 0!==t&&t.exports&&(t.exports=e),"undefined"!=typeof window&&(window.ScrollirisReadabilityTracker=e)}({Client:function(e){return e&&e.__esModule?e:{default:e}}(e("./component/client")).default})},{"./component/client":2}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=r(e("./clock")),u=r(e("./counter")),l=r(e("./timer")),c=r(e("./recorder")),s=r(e("./privacy")),h=r(e("../util/base64")),f=r(e("../util/fibonacci")),d=r(e("../util/uuid")),v=r(e("../util/request-worker")),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.apiKey=t.apiKey,this.csrfToken=n.csrfToken||null,this.clock=n.baseDate?new a.default(n.baseDate):new a.default,this.error=this._checkConfig();var r=n.debug||!1;if(!1!==r&&console.log("[DEBUG] debug mode is enabled"),this.debug=r,this.error)throw new Error("[ERROR]");this.timer=new l.default,this.timer.start(),this.scrolling=!1,this.detecting=!1,this.capturing=!1,this.endpointURL=n.endpointURL||"http://127.0.0.1/",this.eventKey=this._genEventKey(),this.credentials={authorization:this.apiKey,csrfToken:this.csrfToken},this.privacy=new s.default,this.counter=new u.default,this.worker=window.Worker?new window.Worker(window.URL.createObjectURL(v.default)):null,this.host=window.location.host.replace(/:[0-9]*$/g,""),this.path=n.path||window.location.pathname.replace(/(^\/?)/,"/")}return o(e,[{key:"_checkConfig",value:function(){var e=!1;return void 0!==this.apiKey&&null!==this.apiKey&&""!==this.apiKey||(e=!0,console.error("[ERROR] apiKey is needed")),e}},{key:"_genEventKey",value:function(){return h.default.urlsafe_b64encode(d.default.uuid4())}},{key:"_sendAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll";if(this.error||this.privacy.check()&&!0===this.privacy.protected)return null;if(void 0===this.recorder)return null;var t=this.recorder.dump()||{data:null,info:null},n=t.data,r=t.info;if(null===n||null===n.duration||null===r||0===Object.getOwnPropertyNames(r.scroll).length)return this.counter.clear(),null;var i={host:this.host,path:this.path,eventKey:this.eventKey,eventType:e,record:t,count:this.counter.value,duration:this.timer.value,startedAt:this.timer.startedAt,timestamp:this.clock.getTime(),extra:this.extra};if(!0===this.debug)return console.log(i),null;null!==this.worker&&this.worker.postMessage([i,this.endpointURL,this.credentials])}},{key:"_track",value:function(e){var t=this;if(this.error||this.privacy.check()&&!0===this.privacy.protected)return null;this.recorder||void 0===e||(this.recorder=new c.default(e));var n=(0,f.default)();this.detecting=setTimeout(function(){var e=new u.default,r=new l.default,i=t.clock.getTime();r.start(),t.counter.increment(),n.send(!0);t.capturing=setInterval(function o(){clearInterval(t.capturing),e.increment(),t.recorder.capture(t.article,{count:e.value,duration:r.value,startedAt:i}),t.capturing=setInterval(o,1e3*n.next())},1e3*n.next())},100)}},{key:"record",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.extra=e.extra||{};var t=e.selectors||null;if(this.article=document.querySelector(t?t.article:"body article"),void 0===this.article||null===this.article)return console.error("[ERROR] valid article DOM is needed"),null;this._track(t)}},{key:"ready",value:function(e,t){var n=this;if(void 0===document.addEventListener||void 0===document.hidden)return console.error("[ERROR] This page requires a browser, such as Firefox that supports the modern APIs."),this.error=!0,null;var r=function(){"active"===n.timer.state?n.timer.pause():n.timer.start()};document.addEventListener("visibilitychange",function(e){if(n.error||n.privacy.check()&&!0===n.privacy.protected)return!1;if(e){e.preventDefault(),r();var t=e.type.match(/visibilitychange$/i);(t&&document.hidden||!t)&&n._sendAction(e.type)}else r()},null),document.addEventListener("fullscreenchange",function(e){if(n.error||n.privacy.check()&&!0===n.privacy.protected)return!1;e?(e.preventDefault(),r(),e.type.match(/fullscreenchange$/i)&&n._sendAction(e.type)):r()},null);var i=setInterval(function(){e.every(function(e){return document.querySelector(e)})&&o()},100),o=function(){clearInterval(i),n.article||t()};document.addEventListener("DOMContentLoaded",o);document.addEventListener("scroll",function(){clearTimeout(n.detecting),clearInterval(n.capturing),void 0===n.scrolling||null===n.scrolling||!1===n.scrolling?n._sendAction("scroll"):clearTimeout(n.scrolling),n.scrolling=setTimeout(function(){n.scrolling=null},100),n.article||t(),n._track()})}}]),e}();n.default=p},{"../util/base64":9,"../util/fibonacci":10,"../util/request-worker":11,"../util/uuid":12,"./clock":3,"./counter":4,"./privacy":5,"./recorder":6,"./timer":8}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),null===n&&(n=(new Date).toISOString());var i=new Date,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return new Date(n)}catch(e){return!0===t&&console.warn("[WARNING] baseDate might be wrong.","It must be ISO-8601 format with Timezone."),new Date}};this._value=o(n,!0);var a=function(){var e=new Date-i,r=o(n);r.setMilliseconds(r.getMilliseconds()+e),t._value=r};setInterval(a,10),a()}return i(e,[{key:"getTime",value:function(){return this._value.getTime()}},{key:"value",get:function(){return this._value}}]),e}();n.default=o},{}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.clear()}return i(e,[{key:"increment",value:function(){return this._value+=1,null}},{key:"clear",value:function(){return this._value=0,null}},{key:"value",get:function(){return this._value}}]),e}();n.default=o},{}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._protected=null}return i(e,[{key:"_hasDoNotTrack",value:function(){return!0===("yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"yes"===window.doNotTrack||"1"===window.doNotTrack||"yes"===navigator.msDoNotTrack||"1"===navigator.msDoNotTrack)?"yes":"no"}},{key:"check",value:function(){if("yes"===this._hasDoNotTrack()&&!0!==this._protected){var e="[INFO] ";null===this._protected&&(e+="You have"),!1===this._protected&&(e+="You have enabled"),console.log(e+" `Do Not Track` option.","We respect your privacy and don't track you ;)"),this._protected=!0}else"no"===this._hasDoNotTrack()&&(!0===this._protected&&console.log("[INFO] You have disabled `Do Not Track` option.","The reading data tracking will be started.","Don't worry! even so, we respect always your privacy.","We don't track who you are. ;)"),this._protected=!1);return this._protected}},{key:"protected",get:function(){return!0===this._protected}}]),e}();n.default=o},{}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e("./scrollbar")),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),this.clear();var n=document.body,i=document.documentElement;this._selectors=this._configureSelectors(t),this._bar=new a.default,this._view={margin:0,width:Math.max(window.innerWidth-this._bar.width,i.clientWidth),height:Math.max(window.innerHeight-this._bar.height,i.clientHeight)},this._page={},this._page.width=Math.max(i.clientWidth,i.scrollWidth,i.offsetWidth,n.scrollWidth,n.offsetWidth),this._page.height=Math.max(i.clientHeight,i.scrollHeight,i.offsetHeight,n.scrollHeight,n.offsetHeight)}return o(e,[{key:"_configureSelectors",value:function(e){return void 0===e||null===e||0===Object.getOwnPropertyNames(e).length?{article:"body article",heading:"h1,h2,h3,h3,h4,h6",paragraph:"p",sentence:"p > span",material:"ul,ol,pre,table,blockquote"}:e}},{key:"_detectIndex",value:function(e,t,n){if(0===e&&this._isInView(n))return t;if(1===e){if(!this._isInView(n))return t+1;if(0===t)return 0}return null}},{key:"_capture",value:function(e,t){for(var n=e.querySelectorAll(this._selectors[t]),r=n.length-1;r>=0;r--){var i=n[r],o=t+"s",a=this._detectIndex(this._data[o].length,r,i);null!==a&&this._data[o].push(a)}}},{key:"_isInView",value:function(e){var t=e.getBoundingClientRect();return t.top<=this._view.height-this._view.margin&&t.top+t.height>=0&&t.left<=this._view.width-this._view.margin&&t.left+t.width>=0}},{key:"_clone",value:function(){var e={},t={};for(var n in this._data)this._data.hasOwnProperty(n)&&(e[n]=this._data[n]);for(var r in this._info)this._info.hasOwnProperty(r)&&(t[r]=this._info[r]);return[e,t]}},{key:"capture",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._data.count=n.count,this._data.duration=n.duration,this._data.startedAt=n.startedAt,null!==this._data.count&&this._data.count>1)return null;if(null===e)return null;["heading","paragraph","sentence","material"].map(function(n){t._capture(e,n);var r=n+"s",i=t._data[r].length;1===i?t._data[r][1]=t._data[r][0]:2===i&&t._data[r].sort(function(e,t){return e-t})});var r=this._bar.calculate(this._page.width,this._page.height,this._view.width,this._view.height),o=i(r,2),a=o[0],u=o[1];return this._info.scroll={position:a,proportion:u},this._info.view=[this._view.width,this._view.height],this._info.page=[this._page.width,this._page.height],null}},{key:"dump",value:function(){var e=this._clone(),t=i(e,2),n=t[0],r=t[1];return this.clear(),{data:n,info:r}}},{key:"clear",value:function(){this._data={headings:[],paragraphs:[],sentences:[],materials:[],count:0,duration:null,startedAt:null},this._info={scroll:{},view:[],page:[]}}}]),e}();n.default=u},{"./scrollbar":7}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e);var t=this._detectSize(),n=i(t,2);this._width=n[0],this._height=n[1],this._position=[0,0],this._proportion=[0,0]}return o(e,[{key:"_detectSize",value:function(){var e=document.createElement("p");e.style.width="100%",e.style.height="100%";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.width="100px",t.style.height="100px",t.style.visibility="hidden",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth,r=e.offsetHeight;t.style.overflow="scroll";var i=e.offsetWidth,o=e.offsetHeight;return n===i&&(i=t.clientWidth),r===o&&(o=t.clientHeight),document.body.removeChild(t),[n-i,r-o]}},{key:"calculate",value:function(e,t,n,r){var i=this.calculatePosition(),o=[].concat(Array.prototype.slice.call(arguments));return o.push(i),[i,this.calculatePropotion.apply(this,o)]}},{key:"calculatePosition",value:function(){return[window.pageXOffset||document.documentElement.scrollLeft,window.pageYOffset||document.documentElement.scrollTop]}},{key:"calculatePropotion",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:calculatePosition(),o=e-n,a=t-r,u=0===o?0:100*Math.abs(i[0]/o),l=0===a?0:100*Math.abs(i[1]/a);return[u>=100?100:u,l>=100?100:l]}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),e}();n.default=a},{}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;r(this,e),this._state="initialized",this._value=t,this._startedAt=null}return i(e,[{key:"start",value:function(){var e=this;return this.pause(),this._interval=setInterval(function(){e._value+=.1},100),this._state="active",this._startedAt=Date.now(),null}},{key:"pause",value:function(){return clearInterval(this.interval),this._state="inactive",null}},{key:"clear",value:function(){return this._value=0,this._state="initialized",this._startedAt=null,null}},{key:"state",get:function(){return this._state}},{key:"value",get:function(){return Number.parseFloat(Number.parseFloat(this._value).toFixed(2))}},{key:"startedAt",get:function(){return this._startedAt}}]),e}();n.default=o},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"urlsafe_b64encode",value:function(e){if("undefined"==typeof window)return e;for(var t=e.replace(/[\-{}]/g,""),n="",r=Number&&Number.parseInt?Number.parseInt:parseInt,i=0;i<t.length;i+=2)n+=String.fromCharCode(r(t.charAt(i)+t.charAt(i+1),16));return window.btoa(n).replace(/\+/g,"-").replace(/\//g,"_")}}]),e}();n.default=o},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){function e(e){return e&&(t=n=0,r=1),t=n,n=r,r+=t,t}var t,n=0,r=1;return{next:function(){return e()},send:e}}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="onmessage = "+String(function(e){var t=e.data[0]||{},n=e.data[1]||"http://127.0.0.1",r=e.data[2]||{csrfToken:null,authorization:null},i=new XMLHttpRequest;i.open("PUT",n,!1),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.authorization&&i.setRequestHeader("Authorization",r.authorization),r.csrfToken&&i.setRequestHeader("X-CSRF-Token",r.csrfToken),i.send(JSON.stringify(t))}),i=void 0;try{i=new Blob([r],{type:"text/javascript"})}catch(e){if("undefined"!=typeof window){if("undefined"==typeof BlobBuilder)throw e;(i=new BlobBuilder).append(r),i=i.getBlob()}}n.default=i},{}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"uuid4",value:function(){if("undefined"==typeof window)return"";var e=Date.now();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}}]),e}();n.default=o},{}]},{},[1]);